window.__require=function t(e,o,i){function s(r,a){if(!o[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var h="function"==typeof __require&&__require;if(!a&&h)return h(c,!0);if(n)return n(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var p=o[r]={exports:{}};e[r][0].call(p.exports,function(t){return s(e[r][1][t]||t)},p,p.exports,t,e,o,i)}return o[r].exports}for(var n="function"==typeof __require&&__require,r=0;r<i.length;r++)s(i[r]);return s}({Bouns:[function(t,e,o){"use strict";cc._RF.push(e,"2d166r79LRJGrwhMdJTM+VP","Bouns"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,n=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.number1=void 0,e.number2=void 0,e.numbersSpriteArray=[],e}return __extends(e,t),e.prototype.updateNumber=function(t){this.number1.getComponent(cc.Sprite).spriteFrame=this.numbersSpriteArray[0],this.number2.getComponent(cc.Sprite).spriteFrame=this.numbersSpriteArray[0],this.number1.getComponent(cc.Sprite).spriteFrame=this.numbersSpriteArray[t%10],this.number2.getComponent(cc.Sprite).spriteFrame=this.numbersSpriteArray[t/10]},__decorate([n(cc.Node)],e.prototype,"number1",void 0),__decorate([n(cc.Node)],e.prototype,"number2",void 0),__decorate([n([cc.SpriteFrame])],e.prototype,"numbersSpriteArray",void 0),__decorate([s],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],Bullet:[function(t,e,o){"use strict";cc._RF.push(e,"84ac4RsKu5CCLdNf2HqZMTa","Bullet"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,n=i.property,r=t("./GameFish"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=0,e.spriteFrameArray=[],e.angle=0,e.level=1,e.attack=4,e._isStart=!1,e._dir=void 0,e}return __extends(e,t),e.prototype.shoot=function(t,e){this.node.angle=t,this._dir=e,this._isStart=!0},e.prototype.onLoad=function(){var t=cc.director.getCollisionManager();this.node.zIndex=0,t.enabled=!0},e.prototype.setSprite=function(){this.node.getComponent(cc.Sprite).spriteFrame=this.spriteFrameArray[this.level-1];var t=this.node.getComponent(cc.BoxCollider);t.size.height=this.node.height,t.size.width=this.node.width},e.prototype.onCollisionEnter=function(t,e){cc.systemEvent.emit("catch-fish",t.node,e.node)},e.prototype.update=function(t){this._isStart&&(this.node.x+=this._dir.x*this.speed*t,this.node.y+=this._dir.y*this.speed*t),(this.node.x-this.node.width/2>this.node.parent.width/2+5||this.node.x+this.node.width/2<-this.node.parent.width/2-5||this.node.y+this.node.height/2<-this.node.parent.height/2-5||this.node.y-this.node.height/2>this.node.parent.height/2+5)&&this.node.parent.getComponent(r.default).despawnBullet(this.node)},e.prototype.onDestroy=function(){this.node.getComponent(cc.Collider).node.off("onCollisionEnter",this.onCollisionEnter,this)},__decorate([n],e.prototype,"speed",void 0),__decorate([n([cc.SpriteFrame])],e.prototype,"spriteFrameArray",void 0),__decorate([s],e)}(cc.Component);o.default=a,cc._RF.pop()},{"./GameFish":"GameFish"}],Constant:[function(t,e,o){"use strict";cc._RF.push(e,"75097pTyn9HdKg0RBdYPXjQ","Constant"),Object.defineProperty(o,"__esModule",{value:!0}),o.prizeConfigs=o.fishConfigs=o.levelConfigs=void 0,o.levelConfigs=[{level:1,time:20,playerSpeed:800,maxStarDuration:5,minStarDuration:4},{level:2,time:20,playerSpeed:400,maxStarDuration:4,minStarDuration:3},{level:3,time:20,playerSpeed:400,maxStarDuration:3,minStarDuration:2},{level:4,time:20,playerSpeed:200,maxStarDuration:3,minStarDuration:2}],o.fishConfigs=[{name:"fish_red",hp:10,gold:10,boxHeight:35,offsetY:10},{name:"fish_denglongyu",hp:20,gold:10,boxHeight:92,offsetY:15},{name:"fish_yellow",hp:30,gold:10,boxHeight:24,offsetY:6},{name:"fish_bigred",hp:40,gold:20,boxHeight:33,offsetY:9.8},{name:"fish_fuyi",hp:50,gold:20,boxHeight:142,offsetY:15},{name:"fish_gui",hp:50,gold:30,boxHeight:128,offsetY:15},{name:"fish_hailuoshuimu",hp:60,gold:30,boxHeight:57,offsetY:10},{name:"fish_hetun",hp:60,gold:40,boxHeight:70,offsetY:10},{name:"fish_jinshayu",hp:80,gold:40,boxHeight:77,offsetY:11},{name:"fish_shayu",hp:70,gold:50,boxHeight:77,offsetY:11},{name:"fish_shuimu",hp:60,gold:50,boxHeight:113,offsetY:15}],o.prizeConfigs=[{count:288,weight:500},{count:0,weight:2e3},{count:1e3,weight:400},{count:2e3,weight:300},{count:0,weight:2e3},{count:5e3,weight:100},{count:30,weight:1e3},{count:500,weight:400},{count:0,weight:2e3},{count:500,weight:400}],cc._RF.pop()},{}],Fish:[function(t,e,o){"use strict";cc._RF.push(e,"7795aGCCr1HCa7kgsyaxA69","Fish"),Object.defineProperty(o,"__esModule",{value:!0});var i,s=cc._decorator,n=s.ccclass,r=s.property,a=t("./GameFish");(function(t){t[t.WEST=0]="WEST",t[t.NORTH=1]="NORTH",t[t.EAST=2]="EAST",t[t.SOUTH=3]="SOUTH"})(i||(i={}));var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spriteAtlas=void 0,e.hp=0,e.gold=0,e.name=void 0,e.boxHeight=0,e.offsetY=0,e.isStart=!1,e._dir=void 0,e._speed=50,e._routeDirArray=[[-45,45],[-135,-45],[135,225]],e}return __extends(e,t),e.prototype.onLoad=function(){this.node.zIndex=0},e.prototype.init=function(t){this.name=t.name,this.hp=t.hp,this.gold=t.gold,this.boxHeight=t.boxHeight,this.offsetY=t.offsetY,this._generateRoute(),this.node.getComponent(cc.Sprite).spriteFrame=this.spriteAtlas.getSpriteFrame(this.name+"_run_0"),this.node.getComponent(cc.Animation).play(this.name+"_run"),this._resizeBox(),this.isStart=!0},e.prototype._generateRoute=function(){var t,e,o,s=Math.floor(Math.random()*this._routeDirArray.length);switch(s){case i.WEST:e=this._getRandom(-.5*(this.node.parent.height-this.node.height),.5*(this.node.parent.height-this.node.height)),this.node.setPosition(new cc.Vec2(-.5*(this.node.parent.width+this.node.width)-50,e)),t=this._getRandom(this._routeDirArray[s][0],this._routeDirArray[s][1]),this._dir=this._angleToDirection(t),this.node.angle=t;break;case i.NORTH:o=this._getRandom(-.5*(this.node.parent.width-this.node.width),.5*(this.node.parent.width-this.node.width)),this.node.setPosition(new cc.Vec2(o,.5*(this.node.parent.height+this.node.height)+50)),t=this._getRandom(this._routeDirArray[s][0],this._routeDirArray[s][1]),this._dir=this._angleToDirection(t),this.node.angle=t;break;case i.EAST:e=this._getRandom(-.5*(this.node.parent.height-this.node.height),.5*(this.node.parent.height-this.node.height)),this.node.setPosition(new cc.Vec2(.5*(this.node.parent.width+this.node.width)+50,e)),t=this._getRandom(this._routeDirArray[s][0],this._routeDirArray[s][1]),this._dir=this._angleToDirection(t),this.node.angle=t;break;case i.SOUTH:o=this._getRandom(-.5*(this.node.parent.width-this.node.width),.5*(this.node.parent.width-this.node.width)),this.node.setPosition(new cc.Vec2(o,-.5*(this.node.parent.height+this.node.height)-50)),t=this._getRandom(this._routeDirArray[s][0],this._routeDirArray[s][1]),this._dir=this._angleToDirection(t),this.node.angle=t}},e.prototype._getRandom=function(t,e){return Math.random()*(e-t)+t},e.prototype._angleToDirection=function(t){var e=cc.misc.degreesToRadians(t),o=Math.cos(e),i=Math.sin(e);return cc.v2(o,i)},e.prototype._resizeBox=function(){var t=this.node.getComponent(cc.BoxCollider);t.size.width=this.node.width,t.size.height=this.boxHeight,t.offset=new cc.Vec2(0,this.offsetY)},e.prototype._swimming=function(t){this.node.x+=this._dir.x*this._speed*t,this.node.y+=this._dir.y*this._speed*t},e.prototype.getAttack=function(t){this.hp-=t,this._speed<100&&(this._speed*=1.2),this._speed>=100&&(this._speed=100)},e.prototype.reuse=function(){this._speed=50},e.prototype.update=function(t){this.isStart&&(this._swimming(t),(this.node.x-this.node.width/2>this.node.parent.width/2+100||this.node.x+this.node.width/2<-this.node.parent.width/2-100||this.node.y+this.node.height/2<-this.node.parent.height/2-100||this.node.y-this.node.height/2>this.node.parent.height/2+100)&&(this.isStart=!1,this.node.parent.getComponent(a.default).despawnFish(this.node)))},__decorate([r(cc.SpriteAtlas)],e.prototype,"spriteAtlas",void 0),__decorate([n],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./GameFish":"GameFish"}],GameFish:[function(t,e,o){"use strict";cc._RF.push(e,"1df67falZ5DZ7ldpry6Bos3","GameFish"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,n=i.property,r=t("./Bullet"),a=t("../GlobalUser"),c=t("./NumberController"),h=t("../knightGame/GameUtils"),p=t("./Net"),d=t("./Fish"),l=t("./Bouns"),u=t("./Weapon"),_=t("./Lottery"),y=t("../Constant"),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.weapon=void 0,e.background=void 0,e.bottomBar=void 0,e.username=void 0,e.backBtn=void 0,e.drawBtn=void 0,e.bulletPrefab=void 0,e.fishPrefab=void 0,e.netPrefab=void 0,e.bonusPrefab=void 0,e.usernameLabel=void 0,e.spriteAtlas=void 0,e.bgmAudio=void 0,e.btnMusicOn=void 0,e.btnMusicOff=void 0,e.colliderBoxDebug=!1,e.menuNode=void 0,e.lottery=void 0,e.currentPoint=0,e.numberControl=void 0,e._bulletPool=void 0,e._netPool=void 0,e._fishPool=void 0,e._bonusPool=void 0,e._userNode=void 0,e._username=void 0,e._level=1,e._gameRunning=!0,e._fishType=[],e}return __extends(e,t),e.prototype.onLoad=function(){if(this.btnMusicOff.node.active=!1,this._enableCollision(),this._userNode=cc.director.getScene().getChildByName("PersistUserNode"),this._userNode){var t=this._userNode.getComponent(a.default).name;this.usernameLabel.string="Hi "+t+"!",this._username=t,this._loadUserInfo()}this._fishPool=new cc.NodePool(d.default);for(var e=0;e<10;e++)this._fishPool.put(cc.instantiate(this.fishPrefab));for(this._loadFishType(),this._bonusPool=new cc.NodePool(l.default),e=0;e<5;e++)this._bonusPool.put(cc.instantiate(this.bonusPrefab));this.node.on("touchend",this._touchUpHandler,this),this._bulletPool=new cc.NodePool(r.default),this._netPool=new cc.NodePool(p.default),this._updatePoints(),cc.systemEvent.on("catch-fish",this._onCatchFish,this),this.background.zIndex=-1,this.bottomBar.zIndex=1,this.username.zIndex=1,this.backBtn.zIndex=1,this.btnMusicOff.node.zIndex=1,this.btnMusicOn.node.zIndex=1,this.menuNode.zIndex=1,this.drawBtn.zIndex=1,cc.audioEngine.playEffect(this.bgmAudio,!0)},e.prototype.btnMusicOnHandler=function(){this.btnMusicOn.node.active=!1,this.btnMusicOff.node.active=!0,cc.audioEngine.stopAllEffects()},e.prototype.btnMusicOffHandler=function(){this.btnMusicOn.node.active=!0,this.btnMusicOff.node.active=!1,cc.audioEngine.playEffect(this.bgmAudio,!0)},e.prototype._loadFishType=function(){this._fishType=y.fishConfigs,this.schedule(this.spawnFish,5)},e.prototype._enableCollision=function(){var t=cc.director.getCollisionManager();t.enabled=!0,this.colliderBoxDebug&&(t.enabledDebugDraw=!0,t.enabledDrawBoundingBox=!0)},e.prototype.despawnFish=function(t){this._fishPool.put(t)},e.prototype.spawnFish=function(){for(var t=0;t<3;t++){var e=this._fishPool.get();e||(e=cc.instantiate(this.fishPrefab)),this.node.addChild(e);var o=Math.floor(Math.random()*this._fishType.length);e.getComponent(d.default).init(this._fishType[o])}},e.prototype._onCatchFish=function(t,e){var o=this;if(t.getComponent(d.default).isStart){this._spawnNet(e),t.getComponent(d.default).getAttack(e.getComponent(r.default).attack*this._level);var i=t.getComponent(d.default).hp;this.despawnBullet(e),i<=0&&(this.currentPoint+=t.getComponent(d.default).gold,this._spawnBouns(t.getComponent(d.default).gold),this._updatePoints(),t.getComponent(d.default).isStart=!1,h.default.playAnimation(t,t.getComponent(d.default).name+"_dead",function(){o._fishPool.put(t)}))}},e.prototype.drawBtnHandler=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return this.currentPoint-this.lottery.getComponent(_.default).drawCost>0?(this.currentPoint-=this.lottery.getComponent(_.default).drawCost,this._updatePoints(),[4,this.lottery.getComponent(_.default).drawStart()]):[3,2];case 1:t=e.sent(),this.currentPoint+=t,this._updatePoints(),e.label=2;case 2:return[2]}})})},e.prototype.cancelBtnHandler=function(){var t=cc.moveTo(1,new cc.Vec2(-780,0)).easing(cc.easeCubicActionOut());this.lottery.runAction(t),this.lottery.getComponent(_.default).pointer.angle=0},e.prototype._spawnBouns=function(t){var e=this,o=this._bonusPool.get();o||(o=cc.instantiate(this.bonusPrefab)),this.node.addChild(o),o.getComponent(l.default).updateNumber(t),h.default.playAnimation(o,"bonusFade",function(){e._bonusPool.put(o)})},e.prototype._spawnNet=function(t){var e=this,o=t.angle,i=this._netPool.get();i||(i=cc.instantiate(this.netPrefab)),i.getComponent(p.default).level=this._level,i.getComponent(p.default).setSprite();var s=t.x+.5*Math.sin(-Math.PI*o/180)*t.height,n=t.y+.5*Math.cos(-Math.PI*o/180)*t.height;i.setPosition(s,n),this.node.addChild(i),h.default.playAnimation(i,"net_"+this._level,function(){e._netPool.put(i)})},e.prototype._updatePoints=function(){this.numberControl.getComponent(c.default).updateNumber(this.currentPoint)},e.prototype.onDestroy=function(){cc.systemEvent.off("catch-fish",this._onCatchFish,this)},e.prototype.backBtnHandler=function(){cc.audioEngine.stopAllEffects(),this._updateUserInfo(),cc.director.loadScene("login")},e.prototype._loadUserInfo=function(){var t=this,e=cc.sys.localStorage.getItem("fishingGame"),o=JSON.parse(e);if(o){var i=o.users.findIndex(function(e){return e.name===t._username});this.currentPoint=-1===i?50:o.users[i].score}else this.currentPoint=50},e.prototype._updateUserInfo=function(){var t={name:this._username,score:0===this.currentPoint?50:this.currentPoint},e=cc.sys.localStorage.getItem("fishingGame"),o=JSON.parse(e);if(o){var i=o.users.findIndex(function(e){return e.name===t.name});-1===i?o.users.push(t):o.users[i]=t,cc.sys.localStorage.setItem("fishingGame",JSON.stringify(o))}else{var s={users:[t]};cc.sys.localStorage.setItem("fishingGame",JSON.stringify(s))}},e.prototype.weaponUpgrade=function(){this._level<=6&&this._level++,this.weapon.getComponent(u.default).setLevel(this._level)},e.prototype.weaponDowngrade=function(){this._level>=2&&this._level--,this.weapon.getComponent(u.default).setLevel(this._level)},e.prototype._touchUpHandler=function(t){var e=t.getLocation(),o=this.weapon.convertToWorldSpaceAR(cc.Vec2.ZERO),i=e.sub(o).normalize(),s=180*Math.atan2(i.y,i.x)/Math.PI;s=-(90-s),this.weapon.angle=s,this._spawnBullet(s,i)},e.prototype._spawnBullet=function(t,e){if(this.currentPoint-this._level>=0){this.currentPoint-=this._level,this._updatePoints();var o=this._bulletPool.get();null==o&&(o=cc.instantiate(this.bulletPrefab));var i=this.weapon.convertToWorldSpaceAR(cc.v2(0,this.weapon.height/2)),s=this.node.convertToNodeSpaceAR(i);o.getComponent(r.default).level=this._level,o.getComponent(r.default).setSprite(),o.setPosition(s),this.node.addChild(o),o.getComponent(r.default).shoot(t,e),this.weapon.getComponent(cc.Animation).play("weapon"+this._level)}},e.prototype.despawnBullet=function(t){this._bulletPool.put(t)},e.prototype._gameOver=function(){var t=cc.moveTo(1,new cc.Vec2(0,-20)).easing(cc.easeCubicActionOut()),e=cc.moveTo(.3,new cc.Vec2(0,0)).easing(cc.easeCubicActionIn());this.menuNode.runAction(cc.sequence(t,e)),this.unschedule(this.spawnFish),this._gameRunning=!1},e.prototype.restartBtnHandler=function(){var t=cc.moveTo(1,new cc.Vec2(0,622)).easing(cc.easeCubicActionOut());this.menuNode.runAction(t),this._level=1,this.weapon.getComponent(u.default).setLevel(this._level),this.currentPoint=50,this.weapon.angle=0,this._updatePoints(),this.schedule(this.spawnFish,5),this._gameRunning=!0},e.prototype.showDrawBtnHandler=function(){var t=cc.moveTo(1,new cc.Vec2(0,0)).easing(cc.easeCubicActionOut());this.lottery.runAction(t)},e.prototype.update=function(){this._gameRunning&&0==this.currentPoint&&this._gameOver()},__decorate([n(cc.Node)],e.prototype,"weapon",void 0),__decorate([n(cc.Node)],e.prototype,"background",void 0),__decorate([n(cc.Node)],e.prototype,"bottomBar",void 0),__decorate([n(cc.Node)],e.prototype,"username",void 0),__decorate([n(cc.Node)],e.prototype,"backBtn",void 0),__decorate([n(cc.Node)],e.prototype,"drawBtn",void 0),__decorate([n(cc.Prefab)],e.prototype,"bulletPrefab",void 0),__decorate([n(cc.Prefab)],e.prototype,"fishPrefab",void 0),__decorate([n(cc.Prefab)],e.prototype,"netPrefab",void 0),__decorate([n(cc.Prefab)],e.prototype,"bonusPrefab",void 0),__decorate([n(cc.Label)],e.prototype,"usernameLabel",void 0),__decorate([n(cc.SpriteAtlas)],e.prototype,"spriteAtlas",void 0),__decorate([n(cc.AudioClip)],e.prototype,"bgmAudio",void 0),__decorate([n(cc.Button)],e.prototype,"btnMusicOn",void 0),__decorate([n(cc.Button)],e.prototype,"btnMusicOff",void 0),__decorate([n],e.prototype,"colliderBoxDebug",void 0),__decorate([n(cc.Node)],e.prototype,"menuNode",void 0),__decorate([n(cc.Node)],e.prototype,"lottery",void 0),__decorate([n({type:cc.Integer,min:0,max:999999})],e.prototype,"currentPoint",void 0),__decorate([n(cc.Node)],e.prototype,"numberControl",void 0),__decorate([s],e)}(cc.Component);o.default=m,cc._RF.pop()},{"../Constant":"Constant","../GlobalUser":"GlobalUser","../knightGame/GameUtils":"GameUtils","./Bouns":"Bouns","./Bullet":"Bullet","./Fish":"Fish","./Lottery":"Lottery","./Net":"Net","./NumberController":"NumberController","./Weapon":"Weapon"}],GameMonster:[function(t,e,o){"use strict";cc._RF.push(e,"d9ddbiOLpdKI487qIsRZNkj","GameMonster"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,n=i.property,r=t("./PlayerMonster"),a=t("../Star"),c=t("../GlobalUser"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.minStarDuration=0,e.maxStarDuration=0,e.playerMaxHP=0,e.mpRefillDuration=0,e.sizeScale=10,e.starPrefab=void 0,e.ground=void 0,e.player=void 0,e.scoreDisplay=void 0,e.timeDisplay=void 0,e.gameOverDisplay=void 0,e.hpDisplay=void 0,e.mpDisplay=void 0,e.hintLabel=void 0,e.usernameLabel=void 0,e.scoreAudio=void 0,e.startBtn=void 0,e.restartBtn=void 0,e.backBtn=void 0,e.timeProgressBar=void 0,e.mpProgressBar=void 0,e.particle=void 0,e._curStar=void 0,e._isDecreasing=!1,e._mpTimer=0,e._curMP=0,e}return __extends(e,t),e.prototype.onLoad=function(){this._userNode=cc.director.getScene().getChildByName("PersistUserNode"),this._userNode&&(this.usernameLabel.string="Hi "+this._userNode.getComponent(c.default).name+"!"),this._isGameStart=!1,this.player.node.active=!1,this.gameOverDisplay.node.active=!1,this.restartBtn.node.active=!1,this._resetX=this.player.node.x,this._resetY=this.player.node.y,this.timeProgressBar.progress=1,this._curHP=this.playerMaxHP,this.hpDisplay.string="HP: "+this._curHP,this._mpLoad(),this._keyEventLoad(),this.particle.node.active=!1},e.prototype.onDestroy=function(){this._offListener()},e.prototype._offListener=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this._onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this._onKeyUp,this),this.node.off("mousedown",this._onMouseDown,this),this.node.off("mouseup",this._onMouseUp,this)},e.prototype.backBtnHandler=function(){cc.director.loadScene("login")},e.prototype._keyEventLoad=function(){this._isDecreasing=!1,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this._onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this._onKeyUp,this),this.node.on("mousedown",this._onMouseDown,this),this.node.on("mouseup",this._onMouseUp,this)},e.prototype._onMouseDown=function(t){var e=t.getLocation(),o=this.node.convertToNodeSpaceAR(e).x;o>0?this.player.setAccRight(!0):o<0&&this.player.setAccLeft(!0)},e.prototype._onMouseUp=function(){this.player.setAccRight(!1),this.player.setAccLeft(!1)},e.prototype._onKeyDown=function(t){t.keyCode!==cc.macro.KEY.space||this._isDecreasing||(this._isDecreasing=!0,this._decreaseMP())},e.prototype._onKeyUp=function(t){t.keyCode===cc.macro.KEY.space&&(this._isDecreasing=!1)},e.prototype._mpLoad=function(){this._mpTimer=0,this._curMP=0,this.mpDisplay.string="MP: "+this._curMP,this.mpProgressBar.progress=0,this.hintLabel.node.active=!1},e.prototype._decreaseMP=function(){this._curMP>0&&(this._curMP-=1,this._onPicked()),0===this._curMP&&(this.hintLabel.node.active=!1),this.mpDisplay.string="MP: "+this._curMP},e.prototype._increaseMP=function(){0===this._curMP&&(this.hintLabel.node.active=!0,this.hintLabel.getComponent(cc.Animation).play("label")),this._curMP++,this.mpDisplay.string="MP: "+this._curMP,this.mpProgressBar.progress=0,this._mpTimer=0},e.prototype.startBtnHandler=function(){this._groundY=this.ground.y+this.ground.height/2,this._score=0,this._timer=0,this._starDuration=0,this.player.node.active=!0,this.node.on("mousedown",this._onMouseDown,this),this.particle.node.active=!0,this.particle.node.position=this.player.node.position,this._spawnNewStar(),this._isGameStart=!0,this.startBtn.node.active=!1},e.prototype.restartBtnHandler=function(){this.node.getChildByName("star").destroy(),this.restartBtn.node.active=!1,this.gameOverDisplay.node.active=!1,this._score=0,this.scoreDisplay.string="Score: "+this._score,this._timer=0,this._starDuration=0,this.player.node.active=!0,this.player.init(this._resetX,this._resetY),this.particle.resetSystem(),this.particle.node.position=this.player.node.position,this._curHP=this.playerMaxHP,this.hpDisplay.string="HP: "+this._curHP,this._mpLoad(),this._keyEventLoad(),this.node.on("mousedown",this._onMouseDown,this),this._spawnNewStar(),this._isGameStart=!0},e.prototype._spawnNewStar=function(){null!=this._curStar&&this._curStar.destroy();var t=cc.instantiate(this.starPrefab);this._curStar=t,this.node.addChild(t),t.setPosition(this._getNewStarPosition()),this._starDuration=this.minStarDuration+Math.random()*(this.maxStarDuration-this.minStarDuration),t.getComponent(a.default).setStarDuration(this._starDuration),this._timer=0},e.prototype._getNewStarPosition=function(){var t,e=this.node.width/2;t=2*(Math.random()-.5)*e;var o=this._groundY+(Math.random()*this.player.jumpHeight+50);return cc.v2(t,o)},e.prototype._getPlayerDistance=function(){var t=this.player.node.getPosition();return this._curStar.position.sub(new cc.Vec3(t.x,t.y)).mag()},e.prototype._onPicked=function(){this._spawnNewStar(),this._gainScore()},e.prototype._gainScore=function(){this._score++,this.scoreDisplay.string="Score: "+this._score,cc.audioEngine.playEffect(this.scoreAudio,!1),this.player.scaleUPAction(Math.floor(this._score/this.sizeScale)),this._curHP<this.playerMaxHP&&(this._curHP++,this.hpDisplay.string="HP: "+this._curHP)},e.prototype._gameOver=function(){this.player.node.stopAllActions(),this.player.stopPlayer(),this._isGameStart=!1,this.gameOverDisplay.node.active=!0,this.restartBtn.node.active=!0,this._offListener()},e.prototype.update=function(t){if(this._isGameStart){if(this._curStar&&this._getPlayerDistance()<=this._curStar.getComponent(a.default).pickRadius)return void this._onPicked();if(this._timer>this._starDuration){if(this._curHP--,0===this._curHP)return this.hpDisplay.string="HP: "+this._curHP,void this._gameOver();this.hpDisplay.string="HP: "+this._curHP,this.node.getChildByName("star").destroy(),this._spawnNewStar()}this.player&&this.particle&&(this.particle.node.position=this.player.node.position);var e=this._starDuration-this._timer;this.timeDisplay.string="Time: "+("number"==typeof e?e.toFixed(1):0)+"S";var o=1-this._timer/this._starDuration;this.timeProgressBar.progress=o,this._timer+=t,this._mpTimer>this.mpRefillDuration&&this._increaseMP(),this._mpTimer+=t,this.mpProgressBar.progress=this._mpTimer/this.mpRefillDuration}},__decorate([n],e.prototype,"minStarDuration",void 0),__decorate([n],e.prototype,"maxStarDuration",void 0),__decorate([n],e.prototype,"playerMaxHP",void 0),__decorate([n],e.prototype,"mpRefillDuration",void 0),__decorate([n],e.prototype,"sizeScale",void 0),__decorate([n(cc.Prefab)],e.prototype,"starPrefab",void 0),__decorate([n(cc.Node)],e.prototype,"ground",void 0),__decorate([n(r.default)],e.prototype,"player",void 0),__decorate([n(cc.Label)],e.prototype,"scoreDisplay",void 0),__decorate([n(cc.Label)],e.prototype,"timeDisplay",void 0),__decorate([n(cc.Label)],e.prototype,"gameOverDisplay",void 0),__decorate([n(cc.Label)],e.prototype,"hpDisplay",void 0),__decorate([n(cc.Label)],e.prototype,"mpDisplay",void 0),__decorate([n(cc.Label)],e.prototype,"hintLabel",void 0),__decorate([n(cc.Label)],e.prototype,"usernameLabel",void 0),__decorate([n(cc.AudioClip)],e.prototype,"scoreAudio",void 0),__decorate([n(cc.Button)],e.prototype,"startBtn",void 0),__decorate([n(cc.Button)],e.prototype,"restartBtn",void 0),__decorate([n(cc.Button)],e.prototype,"backBtn",void 0),__decorate([n(cc.ProgressBar)],e.prototype,"timeProgressBar",void 0),__decorate([n(cc.ProgressBar)],e.prototype,"mpProgressBar",void 0),__decorate([n(cc.ParticleSystem)],e.prototype,"particle",void 0),__decorate([s],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../GlobalUser":"GlobalUser","../Star":"Star","./PlayerMonster":"PlayerMonster"}],GameUtils:[function(t,e,o){"use strict";cc._RF.push(e,"ef63chgXvBOCZ34dTsGhkXD","GameUtils"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,n=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.loadResource=function(t,e){return new Promise(function(o,i){cc.resources.load(t,e,function(t,e){t?i(t):o(e)})})},e.playAnimation=function(t,e,o){var i=t.getComponent(cc.Animation);i&&(i.once("finished",function(){o&&o()},this),i.play(e))},__decorate([s],e)}(cc.Component));o.default=n,cc._RF.pop()},{}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"65938kD9O5PG7LUP4jt1b17","Game"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,n=i.property,r=t("../Constant"),a=t("./Player"),c=t("../Star"),h=t("../GlobalUser"),p=t("./NextLevelWindow"),d=t("./GameUtils"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.minStarDuration=0,e.maxStarDuration=0,e.playerMaxHP=0,e.mpRefillDuration=0,e.sizeScale=10,e.starPrefab=void 0,e.ground=void 0,e.player=void 0,e.scoreDisplay=void 0,e.timeDisplay=void 0,e.gameOverDisplay=void 0,e.hpDisplay=void 0,e.mpDisplay=void 0,e.hintLabel=void 0,e.usernameLabel=void 0,e.levelLabel=void 0,e.gameTimeLabel=void 0,e.scoreAudio=void 0,e.startBtn=void 0,e.restartBtn=void 0,e.backBtn=void 0,e.timeProgressBar=void 0,e.mpProgressBar=void 0,e.particle=void 0,e.rankScroll=void 0,e.ColliderDebugMode=!1,e._curStar=void 0,e._isDecreasing=!1,e._mpTimer=0,e._curMP=0,e._score=void 0,e._starPool=void 0,e._collisionManager=void 0,e._nextLevelWindow=void 0,e}return __extends(e,t),e.prototype.onLoad=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this._initGame()];case 1:return t.sent(),[2]}})})},e.prototype._initGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,i;return __generator(this,function(s){switch(s.label){case 0:this._userNode=cc.director.getScene().getChildByName("PersistUserNode"),this._userNode&&(t=this._userNode.getComponent(h.default).name,this.usernameLabel.string="Hi "+t+"!",this._username=t),s.label=1;case 1:return s.trys.push([1,4,,5]),e=this,[4,d.default.loadResource("Prefabs/rankItem",cc.Prefab)];case 2:return e._rankPrefab=s.sent(),o=this,[4,d.default.loadResource("Prefabs/nextLevelWindow",cc.Prefab)];case 3:return o._nextLevelWindowPrefab=s.sent(),this._levels=r.levelConfigs,this._curLevel=0,this.levelLabel.node.active=!1,this._loadLevel(),this._showLeaderboard(),this._isGameStart=!1,this.player.node.active=!1,this.gameOverDisplay.node.active=!1,this.restartBtn.node.active=!1,this._resetX=this.player.node.x,this._resetY=this.player.node.y,this.timeProgressBar.progress=1,this._curHP=this.playerMaxHP,this.hpDisplay.string="HP: "+this._curHP,this._mpLoad(),this.particle.node.active=!1,this._starPool=new cc.NodePool(c.default),this._prepareStarPool(1),[3,5];case 4:return i=s.sent(),console.error("Failed to load resources:",i),[3,5];case 5:return[2]}})})},e.prototype._loadLevel=function(){this.maxStarDuration=this._levels[this._curLevel].maxStarDuration,this.minStarDuration=this._levels[this._curLevel].minStarDuration,this.player.maxMoveSpeed=this._levels[this._curLevel].playerSpeed,this._gameTimer=this._levels[this._curLevel].time,this.levelLabel.string="Level: "+(this._curLevel+1),this.gameTimeLabel.string="Left: "+this._gameTimer+"S",this.levelLabel.node.active=!0},e.prototype._onStarCollected=function(){this._onPicked()},e.prototype._prepareStarPool=function(t){for(var e=0;e<t;e++){var o=cc.instantiate(this.starPrefab);this._starPool.put(o)}},e.prototype.onDestroy=function(){this._offHandler()},e.prototype._offHandler=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this._onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this._onKeyUp,this),this.node.off("mousedown",this._onMouseDown,this),this.node.off("mouseup",this._onMouseUp,this)},e.prototype.backBtnHandler=function(){cc.director.loadScene("login")},e.prototype._keyEventLoad=function(){this._isDecreasing=!1,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this._onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this._onKeyUp,this),this.node.on("mousedown",this._onMouseDown,this),this.node.on("mouseup",this._onMouseUp,this)},e.prototype._onMouseDown=function(t){var e=t.getLocation(),o=this.node.convertToNodeSpaceAR(e).x;o>0?this.player.setAccRight(!0):o<0&&this.player.setAccLeft(!0)},e.prototype._onMouseUp=function(){this.player.setAccRight(!1),this.player.setAccLeft(!1)},e.prototype._onKeyDown=function(t){t.keyCode!==cc.macro.KEY.space||this._isDecreasing||(this._isDecreasing=!0,this._decreaseMP())},e.prototype._onKeyUp=function(t){t.keyCode===cc.macro.KEY.space&&(this._isDecreasing=!1)},e.prototype._mpLoad=function(){this._mpTimer=0,this._curMP=0,this.mpDisplay.string="MP: "+this._curMP,this.mpProgressBar.progress=0,this.hintLabel.node.active=!1},e.prototype._decreaseMP=function(){this._curMP>0&&(this._curMP-=1,this._onPicked()),0===this._curMP&&(this.hintLabel.node.active=!1),this.mpDisplay.string="MP: "+this._curMP},e.prototype._increaseMP=function(){0===this._curMP&&(this.hintLabel.node.active=!0,this.hintLabel.getComponent(cc.Animation).play("label")),this._curMP++,this.mpDisplay.string="MP: "+this._curMP,this.mpProgressBar.progress=0,this._mpTimer=0},e.prototype.startBtnHandler=function(){this.rankScroll.node.active=!1,this._groundY=this.ground.y+this.ground.height/2,this._score=0,this._timer=0,this._starDuration=0,this.player.node.active=!0,this.particle.node.active=!0,this.particle.node.position=this.player.node.position,this._spawnNewStar(),this._isGameStart=!0,this.startBtn.node.active=!1,this._keyEventLoad(),cc.director.getPhysicsManager().enabled=!0,this._collisionManager=cc.director.getCollisionManager(),this._collisionManager.enabled=!0,this.ColliderDebugMode&&(this._collisionManager.enabledDebugDraw=!0,this._collisionManager.enabledDrawBoundingBox=!0),cc.systemEvent.on("collect-star",this._onStarCollected,this)},e.prototype.restartBtnHandler=function(){this.rankScroll.node.active=!1,this.restartBtn.node.active=!1,this.gameOverDisplay.node.active=!1,this._score=0,this.scoreDisplay.string="Score: "+this._score,this._timer=0,this._starDuration=0,this.player.node.active=!0,this.player.init(this._resetX,this._resetY),this.particle.resetSystem(),this.particle.node.position=this.player.node.position,this._curHP=this.playerMaxHP,this.hpDisplay.string="HP: "+this._curHP,this._mpLoad(),this._keyEventLoad(),this.node.on("mousedown",this._onMouseDown,this),this._spawnNewStar(),this._curLevel=0,this._loadLevel(),this._isGameStart=!0},e.prototype._spawnNewStar=function(){null!=this._curStar&&this._starPool.put(this._curStar);var t=null;t=this._starPool.size()>0?this._starPool.get():cc.instantiate(this.starPrefab),this._curStar=t,this._curStar.active=!0,this.node.addChild(t),t.setPosition(this._getNewStarPosition()),this._starDuration=this.minStarDuration+Math.random()*(this.maxStarDuration-this.minStarDuration),t.getComponent(c.default).setStarDuration(this._starDuration),t.getComponent(c.default).start(),this._timer=0},e.prototype._getNewStarPosition=function(){var t,e=this.node.width/2;t=2*(Math.random()-.5)*e;var o=this._groundY+(Math.random()*this.player.jumpHeight+30);return cc.v2(t,o)},e.prototype._onPicked=function(){this._starPool.put(this._curStar),this._spawnNewStar(),this._gainScore()},e.prototype._gainScore=function(){this._score++,this.scoreDisplay.string="Score: "+this._score,cc.audioEngine.playEffect(this.scoreAudio,!1),this._curHP<this.playerMaxHP&&(this._curHP++,this.hpDisplay.string="HP: "+this._curHP)},e.prototype._gameOver=function(){this.player.node.stopAllActions(),this.player.stopPlayer(),this._isGameStart=!1,this.gameOverDisplay.node.active=!0,this.restartBtn.node.active=!0,this._curStar.active=!1,this._showLeaderboard(),this._offHandler()},e.prototype._showLeaderboard=function(){var t=this;this.rankScroll.node.active=!0;var e=cc.sys.localStorage.getItem("leaderboard"),o=e?JSON.parse(e):[],i=o.find(function(e){return e.username===t._username});i?this._score>i.score&&(i.score=this._score):null!=this._score&&o.push({username:this._username,score:this._score}),cc.sys.localStorage.setItem("leaderboard",JSON.stringify(o)),this._leaderboardDisplay(o)},e.prototype._leaderboardDisplay=function(t){var e=this;this.rankScroll.content.removeAllChildren();var o=cc.instantiate(this._rankPrefab);o.getChildByName("rank").getComponent(cc.Label).string="Rank",o.getChildByName("name").getComponent(cc.Label).string="Name",o.getChildByName("score").getComponent(cc.Label).string="Score",this.rankScroll.content.addChild(o),t.sort(function(t,e){return e.score-t.score}),t.forEach(function(t,o){var i=cc.instantiate(e._rankPrefab);i.getChildByName("rank").getComponent(cc.Label).string=""+(o+1),i.getChildByName("name").getComponent(cc.Label).string=t.username,i.getChildByName("score").getComponent(cc.Label).string=""+t.score,e.rankScroll.content.addChild(i)})},e.prototype._nextLevel=function(){this._nextLevelWindow?this._nextLevelWindow.active=!0:(this._nextLevelWindow=cc.instantiate(this._nextLevelWindowPrefab),this.node.addChild(this._nextLevelWindow),this._nextLevelBtn=this._nextLevelWindow.getComponent(p.default).nextBtn,this._nextLevelLabel=this._nextLevelWindow.getComponent(p.default).score,this._nextLevelBtn.node.on("click",this.nextLevelBtnHandler,this)),this.player.node.stopAllActions(),this.player.stopPlayer(),this._isGameStart=!1,this._curStar.active=!1,this._nextLevelLabel.string=this._score.toString(),this._offHandler()},e.prototype.nextLevelBtnHandler=function(){this._timer=0,this._starDuration=0,this.player.node.active=!0,this.player.init(this._resetX,this._resetY),this.particle.resetSystem(),this.particle.node.position=this.player.node.position,this._keyEventLoad(),this.node.on("mousedown",this._onMouseDown,this),this._spawnNewStar(),this._nextLevelWindow.active=!1,this._curLevel<this._levels.length-1?(this._curLevel++,this._loadLevel()):(this._loadLevel(),this.gameTimeLabel.string="Left: Unlimited!",this.levelLabel.string="This is final level without time limitation",this._curLevel++),this._isGameStart=!0},e.prototype.update=function(t){if(this._isGameStart){if(this._timer>this._starDuration){if(this._curHP--,0===this._curHP)return this.hpDisplay.string="HP: "+this._curHP,void this._gameOver();this.hpDisplay.string="HP: "+this._curHP,this._spawnNewStar()}this.player&&this.particle&&(this.particle.node.position=this.player.node.position);var e=this._starDuration-this._timer;this.timeDisplay.string="Time: "+("number"==typeof e?e.toFixed(1):0)+"S";var o=1-this._timer/this._starDuration;this.timeProgressBar.progress=o,this._timer+=t,this._mpTimer>this.mpRefillDuration&&this._increaseMP(),this._mpTimer+=t,this.mpProgressBar.progress=this._mpTimer/this.mpRefillDuration,this._curLevel<=this._levels.length-1&&(this._gameTimer-=t,this.gameTimeLabel.string="Left: "+(this._gameTimer>0?this._gameTimer.toFixed(1):0)+"S",this._gameTimer<=0&&this._nextLevel())}},__decorate([n],e.prototype,"minStarDuration",void 0),__decorate([n],e.prototype,"maxStarDuration",void 0),__decorate([n],e.prototype,"playerMaxHP",void 0),__decorate([n],e.prototype,"mpRefillDuration",void 0),__decorate([n],e.prototype,"sizeScale",void 0),__decorate([n(cc.Prefab)],e.prototype,"starPrefab",void 0),__decorate([n(cc.Node)],e.prototype,"ground",void 0),__decorate([n(a.default)],e.prototype,"player",void 0),__decorate([n(cc.Label)],e.prototype,"scoreDisplay",void 0),__decorate([n(cc.Label)],e.prototype,"timeDisplay",void 0),__decorate([n(cc.Label)],e.prototype,"gameOverDisplay",void 0),__decorate([n(cc.Label)],e.prototype,"hpDisplay",void 0),__decorate([n(cc.Label)],e.prototype,"mpDisplay",void 0),__decorate([n(cc.Label)],e.prototype,"hintLabel",void 0),__decorate([n(cc.Label)],e.prototype,"usernameLabel",void 0),__decorate([n(cc.Label)],e.prototype,"levelLabel",void 0),__decorate([n(cc.Label)],e.prototype,"gameTimeLabel",void 0),__decorate([n(cc.AudioClip)],e.prototype,"scoreAudio",void 0),__decorate([n(cc.Button)],e.prototype,"startBtn",void 0),__decorate([n(cc.Button)],e.prototype,"restartBtn",void 0),__decorate([n(cc.Button)],e.prototype,"backBtn",void 0),__decorate([n(cc.ProgressBar)],e.prototype,"timeProgressBar",void 0),__decorate([n(cc.ProgressBar)],e.prototype,"mpProgressBar",void 0),__decorate([n(cc.ParticleSystem)],e.prototype,"particle",void 0),__decorate([n(cc.ScrollView)],e.prototype,"rankScroll",void 0),__decorate([n],e.prototype,"ColliderDebugMode",void 0),__decorate([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../Constant":"Constant","../GlobalUser":"GlobalUser","../Star":"Star","./GameUtils":"GameUtils","./NextLevelWindow":"NextLevelWindow","./Player":"Player"}],GlobalUser:[function(t,e,o){"use strict";cc._RF.push(e,"87985W8a2VO7KU2hr4NHj50","GlobalUser"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,n=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.username="",e.score=0,e}return __extends(e,t),__decorate([s],e)}(cc.Component));o.default=n,cc._RF.pop()},{}],Login:[function(t,e,o){"use strict";cc._RF.push(e,"45095liwtpOjqeaCPGwztyg","Login"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,n=i.property,r=t("./GlobalUser"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.usernameEditBox=void 0,e.usernameLabel=void 0,e.warningLabel=void 0,e.btnLayout=void 0,e.loadingProgress=void 0,e.loadingLabel=void 0,e._username=null,e._userNode=void 0,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.loadingProgress.node.active=!1,this.loadingLabel.node.active=!1,this._loadUsername(),this.usernameEditBox.node.on("editing-did-ended",function(){t._username=t.usernameEditBox.string,t._saveUsername()},this);var e=cc.director.getScene().getChildByName("PersistUserNode");e||((e=new cc.Node("PersistUserNode")).addComponent(r.default),cc.game.addPersistRootNode(e)),this._userNode=e,this.warningLabel.node.active=!1},e.prototype._loadUsername=function(){var t=cc.sys.localStorage.getItem("curUsername");t&&(this._username=t,this.usernameEditBox.string=t)},e.prototype._saveUsername=function(){cc.sys.localStorage.setItem("curUsername",this._username)},e.prototype.monsterGameBtnHandler=function(){this._inputCheck()&&this._preloadScene("monsterGame")},e.prototype.knightGameBtnHandler=function(){this._inputCheck()&&this._preloadScene("knightGame")},e.prototype.fishGameBtnHandler=function(){this._inputCheck()&&this._preloadScene("fishingGame")},e.prototype._showProgress=function(){this.loadingLabel.node.active=!0,this.loadingProgress.node.active=!0,this.usernameEditBox.node.active=!1,this.usernameLabel.node.active=!1,this.warningLabel.node.active=!1,this.btnLayout.active=!1},e.prototype._unShowProgress=function(){this.loadingLabel.node.active=!1,this.loadingProgress.node.active=!1,this.usernameEditBox.node.active=!0,this.usernameLabel.node.active=!0,this.warningLabel.node.active=!0,this.btnLayout.active=!0},e.prototype._inputCheck=function(){return null!==this._username&&""!==this._username||(this.warningLabel.node.active=!0,this.warningLabel.node.scale=0,cc.tween(this.warningLabel.node).to(.5,{scale:1},{easing:"backOut"}).start(),!1)},e.prototype._startGame=function(t){this._userNode.getComponent(r.default).name=this._username,cc.director.loadScene(t)},e.prototype._preloadScene=function(t){var e=this;this._showProgress(),cc.director.preloadScene(t,this._onProgress.bind(this),function(o){if(o)return e._unShowProgress(),void console.error("Scene preload failed:",o);e.node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){e._startGame(t)})))})},e.prototype._onProgress=function(t,e){var o=t/e;this.loadingProgress.progress=o},__decorate([n(cc.EditBox)],e.prototype,"usernameEditBox",void 0),__decorate([n(cc.Label)],e.prototype,"usernameLabel",void 0),__decorate([n(cc.Label)],e.prototype,"warningLabel",void 0),__decorate([n(cc.Node)],e.prototype,"btnLayout",void 0),__decorate([n(cc.ProgressBar)],e.prototype,"loadingProgress",void 0),__decorate([n(cc.Label)],e.prototype,"loadingLabel",void 0),__decorate([s],e)}(cc.Component);o.default=a,cc._RF.pop()},{"./GlobalUser":"GlobalUser"}],Lottery:[function(t,e,o){"use strict";cc._RF.push(e,"1c5ceu58NtHfoLZvH9lrvtK","Lottery"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Constant"),s=cc._decorator,n=s.ccclass,r=s.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.turnTable=void 0,e.prizePrefab=void 0,e.pointer=void 0,e.info=void 0,e.drawCost=0,e.prizeArray=i.prizeConfigs,e.distance=90,e}return __extends(e,t),e.prototype._init=function(){this.node.zIndex=1,this.info.string="Each draw costs $"+this.drawCost;for(var t=this.prizeArray.length,e=360/t,o=0;o<t;o++){var i=cc.instantiate(this.prizePrefab);this.node.addChild(i);var s=Math.sin(e*Math.PI*o/180)*this.distance,n=Math.cos(e*Math.PI*o/180)*this.distance;i.setPosition(s,n),i.angle=-e*o,i.getComponent(cc.Label).string=0===this.prizeArray[o].count?"Thank\nyou":"Coins\n"+this.prizeArray[o].count}},e.prototype.onLoad=function(){this._init()},e.prototype._getRandomPrize=function(){for(var t=this.prizeArray.reduce(function(t,e){return t+e.weight},0),e=Math.random()*t,o=0,i=0,s=this.prizeArray;i<s.length;i++){var n=s[i];if(e<=(o+=n.weight))return n}return null},e.prototype.drawStart=function(){var t=this;return new Promise(function(e){t.pointer.angle=0;var o=t._getRandomPrize(),i=t.prizeArray.indexOf(o),s=-360/t.prizeArray.length*i-720,n=cc.tween().to(2,{angle:s},{easing:"cubicInOut"}).call(function(){e(o.count)});cc.tween(t.pointer).then(n).start()})},__decorate([r(cc.Node)],e.prototype,"turnTable",void 0),__decorate([r(cc.Prefab)],e.prototype,"prizePrefab",void 0),__decorate([r(cc.Node)],e.prototype,"pointer",void 0),__decorate([r(cc.Label)],e.prototype,"info",void 0),__decorate([r],e.prototype,"drawCost",void 0),__decorate([n],e)}(cc.Component);o.default=a,cc._RF.pop()},{"../Constant":"Constant"}],Net:[function(t,e,o){"use strict";cc._RF.push(e,"ea81du32XNJ+p+/88EfoDlo","Net"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,n=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spriteAtlas=void 0,e.level=1,e}return __extends(e,t),e.prototype.setSprite=function(){this.node.getComponent(cc.Sprite).spriteFrame=this.spriteAtlas.getSpriteFrame("net_"+this.level)},__decorate([n(cc.SpriteAtlas)],e.prototype,"spriteAtlas",void 0),__decorate([s],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],NextLevelWindow:[function(t,e,o){"use strict";cc._RF.push(e,"76e1ayDZbBAWJVE4fHlxcry","NextLevelWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,n=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nextBtn=void 0,e.content=void 0,e.score=void 0,e}return __extends(e,t),__decorate([n(cc.Button)],e.prototype,"nextBtn",void 0),__decorate([n(cc.Label)],e.prototype,"content",void 0),__decorate([n(cc.Label)],e.prototype,"score",void 0),__decorate([s],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],NumberController:[function(t,e,o){"use strict";cc._RF.push(e,"53501GKVbtEcaHjJLHbRkld","NumberController"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,n=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spriteAtlas=void 0,e.numbersArr=[],e}return __extends(e,t),e.prototype.updateNumber=function(t){for(var e=0;e<this.numbersArr.length;e++)this.numbersArr[e].getComponent(cc.Sprite).spriteFrame=this.spriteAtlas.getSpriteFrame("0");for(var o=t,i=1;o>0;){var s=o%10;this.numbersArr[i-1].getComponent(cc.Sprite).spriteFrame=this.spriteAtlas.getSpriteFrame(""+s),o=Math.floor(o/10),i++}},__decorate([n(cc.SpriteAtlas)],e.prototype,"spriteAtlas",void 0),__decorate([n([cc.Node])],e.prototype,"numbersArr",void 0),__decorate([s],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],PlayerCollider:[function(t,e,o){"use strict";cc._RF.push(e,"c6e24sIxodNHLFVMNkF/SpC","PlayerCollider"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,n=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._colliderBox=void 0,e}return __extends(e,t),e.prototype.onLoad=function(){this._colliderBox=this.getComponent(cc.BoxCollider)},e.prototype.onCollisionEnter=function(t){2===t.tag&&cc.systemEvent.emit("collect-star",t.node)},__decorate([s],e)}(cc.Component));o.default=n,cc._RF.pop()},{}],PlayerMonster:[function(t,e,o){"use strict";cc._RF.push(e,"cf8faZOh19Ica4mY9L1t1+o","PlayerMonster"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,n=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jumpHeight=0,e.jumpDuration=0,e.maxMoveSpeed=0,e.acc=0,e.scaleRatio=1,e.scaleDuration=0,e.jumpAudio=void 0,e}return __extends(e,t),e.prototype.setAccRight=function(t){this.accRight=t},e.prototype.setAccLeft=function(t){this.accLeft=t},e.prototype.onLoad=function(){this.init()},e.prototype.init=function(t,e){this._runJumpAction(),t&&(this.node.x=t),e&&(this.node.y=e),this._xSpeed=0,this.accLeft=!1,this.accRight=!1,this._maxX=this.node.parent.width/2-this.node.width/2,this.node.setScale(1,1),this.node.getComponent(cc.Animation).play(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this._onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this._onKeyUp,this)},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this._onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this._onKeyUp,this)},e.prototype.stopPlayer=function(){this._xSpeed=0,this.accLeft=!1,this.accRight=!1,this.node.getComponent(cc.Animation).stop(),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this._onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this._onKeyUp,this)},e.prototype._runJumpAction=function(){var t=cc.tween().by(this.jumpDuration,{y:this.jumpHeight},{easing:"sineOut"}),e=cc.tween().by(this.jumpDuration,{y:-this.jumpHeight},{easing:"sineIn"}),o=cc.tween().sequence(t,e).call(this._playAudio,this);return cc.tween(this.node).repeatForever(o).start()},e.prototype._playAudio=function(){cc.audioEngine.playEffect(this.jumpAudio,!1)},e.prototype._onKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.a:this.accLeft=!0;break;case cc.macro.KEY.d:this.accRight=!0}},e.prototype._onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.a:this.accLeft=!1;break;case cc.macro.KEY.d:this.accRight=!1}},e.prototype.update=function(t){this.accLeft?this._xSpeed-=this.acc*t:this.accRight&&(this._xSpeed+=this.acc*t),this.accLeft||this.accRight||(this._xSpeed>0?(this._xSpeed-=this.acc*t,this._xSpeed<=0&&(this._xSpeed=0)):this._xSpeed<0&&(this._xSpeed+=this.acc*t,this._xSpeed>=0&&(this._xSpeed=0))),Math.abs(this._xSpeed)>this.maxMoveSpeed&&(this._xSpeed=this.maxMoveSpeed*this._xSpeed/Math.abs(this._xSpeed)),Math.abs(this.node.x)>this._maxX&&(this.node.x=this._maxX*this.node.x/Math.abs(this.node.x),this._xSpeed=0),this.node.x+=this._xSpeed*t},e.prototype.scaleUPAction=function(t){var e=Math.pow(this.scaleRatio,t);return cc.tween(this.node).to(this.scaleDuration,{scale:e},{easing:"sineIn"}).start()},__decorate([n],e.prototype,"jumpHeight",void 0),__decorate([n],e.prototype,"jumpDuration",void 0),__decorate([n],e.prototype,"maxMoveSpeed",void 0),__decorate([n],e.prototype,"acc",void 0),__decorate([n],e.prototype,"scaleRatio",void 0),__decorate([n],e.prototype,"scaleDuration",void 0),__decorate([n(cc.AudioClip)],e.prototype,"jumpAudio",void 0),__decorate([s],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"155f2B3ondL5JV6tydo2RIt","Player"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,n=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jumpHeight=0,e.maxMoveSpeed=0,e.acc=0,e.scaleRatio=1,e.scaleDuration=0,e.jumpAudio=void 0,e._playerSpine=void 0,e._isJumping=!1,e._isWalking=!1,e}return __extends(e,t),e.prototype.setAccRight=function(t){this.accRight=t,t&&(this._playerSpine.node.scaleX=Math.abs(this._playerSpine.node.scaleX),this._isWalking||(this._isWalking=!0,this._playerSpine.setAnimation(0,"walk",!0)))},e.prototype.setAccLeft=function(t){this.accLeft=t,t&&(this._playerSpine.node.scaleX=-Math.abs(this._playerSpine.node.scaleX),this._isWalking||(this._isWalking=!0,this._playerSpine.setAnimation(0,"walk",!0)))},e.prototype.onLoad=function(){this._playerSpine=this.getComponent(sp.Skeleton),this._maxX=this.node.parent.width/2-this.node.width/2,this.init(),cc.director.getCollisionManager().enabled=!0},e.prototype.init=function(t,e){null!=t&&(this.node.x=t),null!=e&&(this.node.y=e),this._xSpeed=0,this.accLeft=!1,this.accRight=!1,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this._onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this._onKeyUp,this)},e.prototype.start=function(){this._playerSpine.setAnimation(0,"idle",!0)},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this._onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this._onKeyUp,this)},e.prototype.stopPlayer=function(){this._xSpeed=0,this.accLeft=!1,this.accRight=!1,cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this._onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this._onKeyUp,this)},e.prototype._runJumpAction=function(){var t=this;this._playerSpine.setAnimation(0,"jump",!1)&&this._playerSpine.setCompleteListener(function(){t._isJumping=!1,0===t._xSpeed?t._playerSpine.setAnimation(0,"idle",!0):t._playerSpine.setAnimation(0,"walk",!0)})},e.prototype._playAudio=function(){cc.audioEngine.playEffect(this.jumpAudio,!1)},e.prototype._onKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.a:this.accLeft=!0,this._playerSpine.node.scaleX=-Math.abs(this._playerSpine.node.scaleX),this._isWalking||(this._isWalking=!0,this._playerSpine.setAnimation(0,"walk",!0));break;case cc.macro.KEY.d:this.accRight=!0,this._playerSpine.node.scaleX=Math.abs(this._playerSpine.node.scaleX),this._isWalking||(this._isWalking=!0,this._playerSpine.setAnimation(0,"walk",!0));break;case cc.macro.KEY.w:this._isJumping||(this._isJumping=!0,this._runJumpAction())}},e.prototype._onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.a:this.accLeft=!1;break;case cc.macro.KEY.d:this.accRight=!1}},e.prototype.update=function(t){this.accLeft?this._xSpeed-=this.acc*t:this.accRight&&(this._xSpeed+=this.acc*t),this.accLeft||this.accRight||(this._xSpeed>0?(this._xSpeed-=this.acc*t,this._xSpeed<=0&&(this._xSpeed=0)):this._xSpeed<0&&(this._xSpeed+=this.acc*t,this._xSpeed>=0&&(this._xSpeed=0))),!this._isJumping&&this._isWalking&&0===this._xSpeed&&(this._playerSpine.setAnimation(0,"idle",!0),this._isWalking=!1),Math.abs(this._xSpeed)>this.maxMoveSpeed&&(this._xSpeed=this.maxMoveSpeed*this._xSpeed/Math.abs(this._xSpeed)),Math.abs(this.node.x)>this._maxX&&(this.node.x=this._maxX*this.node.x/Math.abs(this.node.x),this._xSpeed=0),this.node.x+=this._xSpeed*t},e.prototype.scaleUPAction=function(t){var e=Math.pow(this.scaleRatio,t);return cc.tween(this.node).to(this.scaleDuration,{scale:e},{easing:"sineIn"}).start()},__decorate([n],e.prototype,"jumpHeight",void 0),__decorate([n],e.prototype,"maxMoveSpeed",void 0),__decorate([n],e.prototype,"acc",void 0),__decorate([n],e.prototype,"scaleRatio",void 0),__decorate([n],e.prototype,"scaleDuration",void 0),__decorate([n(cc.AudioClip)],e.prototype,"jumpAudio",void 0),__decorate([s],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],Star:[function(t,e,o){"use strict";cc._RF.push(e,"bc0496tWGtI8Zk3Emztje5g","Star"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,n=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pickRadius=0,e._starCollider=null,e}return __extends(e,t),e.prototype.setStarDuration=function(t){this._starDuration=t},e.prototype.onLoad=function(){this._starCollider=this.getComponent(cc.BoxCollider)},e.prototype.start=function(){this._starCollider&&(this._starCollider.tag=2),this._opacityAction()},e.prototype.reuse=function(){this.node.opacity=255,this.node.scale=1},e.prototype._opacityAction=function(){return cc.tween(this.node).to(this._starDuration,{opacity:50,scale:.5},{easing:"sineIn"}).start()},__decorate([n],e.prototype,"pickRadius",void 0),__decorate([s],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],Weapon:[function(t,e,o){"use strict";cc._RF.push(e,"eaff2aNoptKrKrPDwyuYY9U","Weapon"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,n=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spriteFrameArray=[],e._level=1,e}return __extends(e,t),e.prototype.setLevel=function(t){this._level=t,this.getComponent(cc.Sprite).spriteFrame=this.spriteFrameArray[this._level-1]},__decorate([n([cc.SpriteFrame])],e.prototype,"spriteFrameArray",void 0),__decorate([s],e)}(cc.Component);o.default=r,cc._RF.pop()},{}]},{},["Constant","GlobalUser","Login","Star","Bouns","Bullet","Fish","GameFish","Lottery","Net","NumberController","Weapon","Game","GameUtils","NextLevelWindow","Player","PlayerCollider","GameMonster","PlayerMonster"]);